&lt;section id=&quot;nice&quot; data-tool=&quot;mdnice&#x7F16;&#x8F91;&#x5668;&quot; data-website=&quot;https://www.mdnice.com&quot; style=&quot;font-size: 16px; color: black; padding: 0 10px; line-height: 1.6; word-spacing: 0px; letter-spacing: 0px; word-break: break-word; word-wrap: break-word; text-align: left; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &#x27;PingFang SC&#x27;, Cambria, Cochin, Georgia, Times, &#x27;Times New Roman&#x27;, serif;&quot;&gt;&lt;h2 data-tool=&quot;mdnice&#x7F16;&#x8F91;&#x5668;&quot; style=&quot;margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px;&quot;&gt;&lt;span class=&quot;prefix&quot; style=&quot;display: none;&quot;&gt;&lt;/span&gt;&lt;span class=&quot;content&quot;&gt;&#x9700;&#x6C42;&lt;/span&gt;&lt;span class=&quot;suffix&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&#xA;&lt;ol data-tool=&quot;mdnice&#x7F16;&#x8F91;&#x5668;&quot; style=&quot;margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: decimal;&quot;&gt;&#xA;&lt;li&gt;&lt;section style=&quot;margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;&quot;&gt;&#x62E6;&#x622A;&#x6389;&#x6240;&#x6709;&#x7684;xx&#x5E02;&#x7684;&#x8BBF;&#x95EE;&#x6D41;&#x91CF;&#xFF1B;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section style=&quot;margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;&quot;&gt;&#x62E6;&#x622A;&#x8BF7;&#x6C42;&#x4E2D;&#x5305;&#x542B;&#x654F;&#x611F;&#x8BCD;&#x7684;&#x6D41;&#x91CF;&#xFF1B;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section style=&quot;margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;&quot;&gt;&#x62E6;&#x622A;&#x6389;&#x9ED1;&#x540D;&#x5355;&#x4E2D;&#x7684;IP&#xFF1B;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section style=&quot;margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;&quot;&gt;&#x62E6;&#x622A;&#x7279;&#x5B9A;&#x7684;IP&#x5730;&#x5740;&#x6BB5;&#xFF1B;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section style=&quot;margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;&quot;&gt;&#x9650;&#x5236;&#x540C;&#x4E00;IP&#x6BCF;&#x5206;&#x949F;&#x7684;&#x6700;&#x5927;&#x8BF7;&#x6C42;&#x6570;&#x4E3A;n&#x6B21;/&#x5206;&#x949F;&#xFF0C;&#x82E5;&#x4E00;&#x5206;&#x949F;&#x5185;&#x8BF7;&#x6C42;&#x6570;&#x8D85;&#x8FC7;n&#x5219;&#x8BA4;&#x4E3A;&#x662F;&#x6076;&#x610F;&#x8BF7;&#x6C42;&#xFF0C;&#x51BB;&#x7ED3;&#x8BE5;IP 1&#x5206;&#x949F;&#xFF1B;&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&#xA;&lt;h2 data-tool=&quot;mdnice&#x7F16;&#x8F91;&#x5668;&quot; style=&quot;margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px;&quot;&gt;&lt;span class=&quot;prefix&quot; style=&quot;display: none;&quot;&gt;&lt;/span&gt;&lt;span class=&quot;content&quot;&gt;&#x5B89;&#x88C5;nuget&#x5305;&lt;/span&gt;&lt;span class=&quot;suffix&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&#xA;&lt;ul data-tool=&quot;mdnice&#x7F16;&#x8F91;&#x5668;&quot; style=&quot;margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: disc;&quot;&gt;&#xA;&lt;li&gt;&lt;section style=&quot;margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;&quot;&gt;IP2Region  IP&#x5730;&#x5740;&#x5B9A;&#x4F4D;&#x5E93;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section style=&quot;margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;&quot;&gt;CacheManager.Microsoft.Extensions.Caching.Memory &#x7F13;&#x5B58;(&#x4F7F;&#x7528;&#x5185;&#x5B58;&#x6362;&#x5B58;)&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section style=&quot;margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;&quot;&gt;CacheManager.Serialization.Json &#x7F13;&#x5B58;&#x5E8F;&#x5217;&#x5316;&#x5DE5;&#x5177;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&#xA;&lt;p data-tool=&quot;mdnice&#x7F16;&#x8F91;&#x5668;&quot; style=&quot;font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;&quot;&gt;&#x670D;&#x52A1;&#x6CE8;&#x518C;&lt;/p&gt;&#xA;&lt;pre class=&quot;custom&quot; data-tool=&quot;mdnice&#x7F16;&#x8F91;&#x5668;&quot; style=&quot;margin-top: 10px; margin-bottom: 10px;&quot;&gt;&lt;code class=&quot;hljs&quot; style=&quot;overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;&quot;&gt;&lt;span class=&quot;hljs-comment&quot; style=&quot;color: #5c6370; font-style: italic; line-height: 26px;&quot;&gt;//&amp;nbsp;&#x914D;&#x7F6E;CacheManager&lt;/span&gt;&lt;br&gt;services.AddSingleton(&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;typeof&lt;/span&gt;(ICacheManager&amp;lt;&amp;gt;),&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;typeof&lt;/span&gt;(BaseCacheManager&amp;lt;&amp;gt;));&lt;br&gt;services.AddSingleton(&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;new&lt;/span&gt;&amp;nbsp;CacheManager.Core.ConfigurationBuilder()&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.WithJsonSerializer()&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.WithMicrosoftMemoryCacheHandle()&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.WithExpiration(ExpirationMode.Absolute,&amp;nbsp;TimeSpan.FromMinutes(&lt;span class=&quot;hljs-number&quot; style=&quot;color: #d19a66; line-height: 26px;&quot;&gt;5&lt;/span&gt;))&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.Build());&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br&gt;services.Configure&amp;lt;ForwardedHeadersOptions&amp;gt;(options&amp;nbsp;=&amp;gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;options.ForwardLimit&amp;nbsp;=&amp;nbsp;&lt;span class=&quot;hljs-literal&quot; style=&quot;color: #56b6c2; line-height: 26px;&quot;&gt;null&lt;/span&gt;;&lt;span class=&quot;hljs-comment&quot; style=&quot;color: #5c6370; font-style: italic; line-height: 26px;&quot;&gt;//&amp;nbsp;&#x9650;&#x5236;&#x6240;&#x5904;&#x7406;&#x7684;&#x6807;&#x5934;&#x4E2D;&#x7684;&#x6761;&#x76EE;&#x6570;&lt;/span&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;options.ForwardedHeaders&amp;nbsp;=&amp;nbsp;ForwardedHeaders.XForwardedFor&amp;nbsp;|&amp;nbsp;ForwardedHeaders.XForwardedProto;&amp;nbsp;&lt;span class=&quot;hljs-comment&quot; style=&quot;color: #5c6370; font-style: italic; line-height: 26px;&quot;&gt;//&amp;nbsp;X-Forwarded-For&#xFF1A;&#x4FDD;&#x5B58;&#x4EE3;&#x7406;&#x94FE;&#x4E2D;&#x5173;&#x4E8E;&#x53D1;&#x8D77;&#x8BF7;&#x6C42;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x548C;&#x540E;&#x7EED;&#x4EE3;&#x7406;&#x7684;&#x4FE1;&#x606F;&#x3002;X-Forwarded-Proto&#xFF1A;&#x539F;&#x65B9;&#x6848;&#x7684;&#x503C;&amp;nbsp;(HTTP/HTTPS)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;options.KnownNetworks.Clear();&amp;nbsp;&lt;span class=&quot;hljs-comment&quot; style=&quot;color: #5c6370; font-style: italic; line-height: 26px;&quot;&gt;//&amp;nbsp;&#x4ECE;&#x4E2D;&#x63A5;&#x53D7;&#x8F6C;&#x63A5;&#x5934;&#x7684;&#x5DF2;&#x77E5;&#x7F51;&#x7EDC;&#x7684;&#x5730;&#x5740;&#x8303;&#x56F4;&#x3002;&amp;nbsp;&#x4F7F;&#x7528;&#x65E0;&#x7C7B;&#x522B;&#x57DF;&#x9645;&#x8DEF;&#x7531;&#x9009;&#x62E9;&amp;nbsp;(CIDR)&amp;nbsp;&#x8868;&#x793A;&#x6CD5;&#x63D0;&#x4F9B;&amp;nbsp;IP&amp;nbsp;&#x8303;&#x56F4;&#x3002;&#x4F7F;&#x7528;CDN&#x65F6;&#x5E94;&#x6E05;&#x7A7A;&lt;/span&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;options.KnownProxies.Clear();&amp;nbsp;&lt;span class=&quot;hljs-comment&quot; style=&quot;color: #5c6370; font-style: italic; line-height: 26px;&quot;&gt;//&amp;nbsp;&#x4ECE;&#x4E2D;&#x63A5;&#x53D7;&#x8F6C;&#x63A5;&#x5934;&#x7684;&#x5DF2;&#x77E5;&#x4EE3;&#x7406;&#x7684;&#x5730;&#x5740;&#x3002;&amp;nbsp;&#x4F7F;&#x7528;&amp;nbsp;KnownProxies&amp;nbsp;&#x6307;&#x5B9A;&#x7CBE;&#x786E;&#x7684;&amp;nbsp;IP&amp;nbsp;&#x5730;&#x5740;&#x5339;&#x914D;&#x3002;&#x4F7F;&#x7528;CDN&#x65F6;&#x5E94;&#x6E05;&#x7A7A;&lt;/span&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;});&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;p data-tool=&quot;mdnice&#x7F16;&#x8F91;&#x5668;&quot; style=&quot;font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;&quot;&gt;&#x4F7F;&#x7528;&#x4E2D;&#x95F4;&#x4EF6;&lt;/p&gt;&#xA;&lt;pre class=&quot;custom&quot; data-tool=&quot;mdnice&#x7F16;&#x8F91;&#x5668;&quot; style=&quot;margin-top: 10px; margin-bottom: 10px;&quot;&gt;&lt;code class=&quot;hljs&quot; style=&quot;overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;&quot;&gt;app.UseForwardedHeaders().UseCertificateForwarding();&amp;nbsp;&lt;span class=&quot;hljs-comment&quot; style=&quot;color: #5c6370; font-style: italic; line-height: 26px;&quot;&gt;//&amp;nbsp;&#x8F6C;&#x53D1;&#x8BF7;&#x6C42;&#x5934;&#x548C;&#x8BC1;&#x4E66;&lt;/span&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h2 data-tool=&quot;mdnice&#x7F16;&#x8F91;&#x5668;&quot; style=&quot;margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px;&quot;&gt;&lt;span class=&quot;prefix&quot; style=&quot;display: none;&quot;&gt;&lt;/span&gt;&lt;span class=&quot;content&quot;&gt;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x8FC7;&#x6EE4;&#x5668;&lt;/span&gt;&lt;span class=&quot;suffix&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&#xA;&lt;p data-tool=&quot;mdnice&#x7F16;&#x8F91;&#x5668;&quot; style=&quot;font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;&quot;&gt;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x540D;&#x4E3A;FirewallAttribute&#x7684;&#x8FC7;&#x6EE4;&#x5668;&#xFF0C;&#x7EE7;&#x627F;&#x81EA;ActionFilterAttribute&#xFF0C;&#x5E76;&#x91CD;&#x5199;OnActionExecuting&#x65B9;&#x6CD5;&lt;/p&gt;&#xA;&lt;pre class=&quot;custom&quot; data-tool=&quot;mdnice&#x7F16;&#x8F91;&#x5668;&quot; style=&quot;margin-top: 10px; margin-bottom: 10px;&quot;&gt;&lt;code class=&quot;hljs&quot; style=&quot;overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;&quot;&gt;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;public&lt;/span&gt;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;class&lt;/span&gt;&amp;nbsp;&lt;span class=&quot;hljs-title&quot; style=&quot;color: #61aeee; line-height: 26px;&quot;&gt;FirewallAttribute&lt;/span&gt;&amp;nbsp;:&amp;nbsp;&lt;span class=&quot;hljs-title&quot; style=&quot;color: #61aeee; line-height: 26px;&quot;&gt;ActionFilterAttribute&lt;/span&gt;&lt;br&gt;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;private&lt;/span&gt;&amp;nbsp;ICacheManager&amp;lt;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;int&lt;/span&gt;&amp;gt;&amp;nbsp;_cacheManager;&lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-function&quot; style=&quot;line-height: 26px;&quot;&gt;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;public&lt;/span&gt;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;override&lt;/span&gt;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;void&lt;/span&gt;&amp;nbsp;&lt;span class=&quot;hljs-title&quot; style=&quot;color: #61aeee; line-height: 26px;&quot;&gt;OnActionExecuting&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot; style=&quot;line-height: 26px;&quot;&gt;ActionExecutingContext&amp;nbsp;context&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;var&lt;/span&gt;&amp;nbsp;request&amp;nbsp;=&amp;nbsp;context.HttpContext.Request;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;_cacheManager&amp;nbsp;=&amp;nbsp;context.HttpContext.RequestServices.GetService&amp;lt;ICacheManager&amp;lt;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;int&lt;/span&gt;&amp;gt;&amp;gt;();&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;if&lt;/span&gt;&amp;nbsp;(context.Filters.Any(m&amp;nbsp;=&amp;gt;&amp;nbsp;m.ToString().Contains(&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;nameof&lt;/span&gt;(AllowAccessFirewallAttribute))))&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-comment&quot; style=&quot;color: #5c6370; font-style: italic; line-height: 26px;&quot;&gt;//&amp;nbsp;&#x767D;&#x540D;&#x5355;&#x76F4;&#x63A5;&#x8DF3;&#x8FC7;&lt;/span&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;return&lt;/span&gt;;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-meta&quot; style=&quot;color: #61aeee; line-height: 26px;&quot;&gt;#&lt;span class=&quot;hljs-meta-keyword&quot; style=&quot;line-height: 26px;&quot;&gt;region&lt;/span&gt;&amp;nbsp;&#x5B9E;&#x73B0;&#x8FC7;&#x6EE4;&#x6307;&#x5B9A;&#x5730;&#x533A;&#x7684;&#x6D41;&#x91CF;&lt;/span&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;var&lt;/span&gt;&amp;nbsp;ip&amp;nbsp;=&amp;nbsp;context.HttpContext.Connection.RemoteIpAddress.MapToIPv4().ToString();&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-comment&quot; style=&quot;color: #5c6370; font-style: italic; line-height: 26px;&quot;&gt;//&amp;nbsp;&#x7531;&#x4E8E;X-Forwarded-For&#x6807;&#x5934;&#x53EF;&#x80FD;&#x4F1A;&#x88AB;&#x5BA2;&#x6237;&#x7AEF;&#x7BE1;&#x6539;&#x8FDB;&#x884C;&#x4F2A;&#x9020;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x8FD8;&#x9700;&#x8981;&#x7528;CDN&#x63D0;&#x4F9B;&#x7684;&#x4E00;&#x4E2A;&#x8F6C;&#x53D1;&#x5BA2;&#x6237;&#x7AEF;&#x771F;&#x5B9E;IP&#x5E76;&#x4E14;&#x4E0D;&#x53EF;&#x7BE1;&#x6539;&#x7684;&#x6807;&#x5934;&#x8FDB;&#x884C;&#x53CC;&#x91CD;&#x68C0;&#x67E5;&#xFF0C;&#x6BD4;&#x5982;cloudflare&#x7684;CF-Connecting-IP&#x6807;&#x5934;&#x662F;&#x4E0D;&#x53EF;&#x88AB;&#x7BE1;&#x6539;&#x7684;&#x6807;&#x5934;&#x3002;&lt;/span&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;var&lt;/span&gt;&amp;nbsp;trueip&amp;nbsp;=&amp;nbsp;request.Headers[&lt;span class=&quot;hljs-string&quot; style=&quot;color: #98c379; line-height: 26px;&quot;&gt;&quot;CF-Connecting-IP&quot;&lt;/span&gt;].ToString();&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;if&lt;/span&gt;&amp;nbsp;(!&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;string&lt;/span&gt;.IsNullOrEmpty(trueip)&amp;nbsp;&amp;amp;&amp;amp;&amp;nbsp;ip&amp;nbsp;!=&amp;nbsp;trueip)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;context.Result&amp;nbsp;=&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;new&lt;/span&gt;&amp;nbsp;BadRequestObjectResult(&lt;span class=&quot;hljs-string&quot; style=&quot;color: #98c379; line-height: 26px;&quot;&gt;&quot;&#x5BA2;&#x6237;&#x7AEF;&#x8BF7;&#x6C42;&#x4E0D;&#x5408;&#x6CD5;&#xFF0C;&#x4F2A;&#x9020;IP&#xFF1A;&quot;&lt;/span&gt;&amp;nbsp;&#x2B;&amp;nbsp;ip);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;return&lt;/span&gt;;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-comment&quot; style=&quot;color: #5c6370; font-style: italic; line-height: 26px;&quot;&gt;//&amp;nbsp;IsInDenyArea&amp;nbsp;&#x9700;&#x8981;&#x4F7F;&#x7528;IP2Region&#x7684;&#x79BB;&#x7EBF;&#x5E93;&lt;/span&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;if&lt;/span&gt;&amp;nbsp;(ip.IsInDenyArea(&lt;span class=&quot;hljs-string&quot; style=&quot;color: #98c379; line-height: 26px;&quot;&gt;&quot;&#x5317;&#x4EAC;&quot;&lt;/span&gt;))&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;context.Result&amp;nbsp;=&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;new&lt;/span&gt;&amp;nbsp;BadRequestObjectResult(&lt;span class=&quot;hljs-string&quot; style=&quot;color: #98c379; line-height: 26px;&quot;&gt;&quot;&#x8BBF;&#x95EE;&#x5730;&#x533A;&#x9650;&#x5236;&quot;&lt;/span&gt;);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;return&lt;/span&gt;;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-meta&quot; style=&quot;color: #61aeee; line-height: 26px;&quot;&gt;#&lt;span class=&quot;hljs-meta-keyword&quot; style=&quot;line-height: 26px;&quot;&gt;endregion&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-meta&quot; style=&quot;color: #61aeee; line-height: 26px;&quot;&gt;#&lt;span class=&quot;hljs-meta-keyword&quot; style=&quot;line-height: 26px;&quot;&gt;region&lt;/span&gt;&amp;nbsp;&#x654F;&#x611F;&#x8BCD;&lt;/span&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;var&lt;/span&gt;&amp;nbsp;path&amp;nbsp;=&amp;nbsp;HttpUtility.UrlDecode(request.Path&amp;nbsp;&#x2B;&amp;nbsp;request.QueryString,&amp;nbsp;Encoding.UTF8);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;if&lt;/span&gt;&amp;nbsp;(Regex.Match(path&amp;nbsp;??&amp;nbsp;&lt;span class=&quot;hljs-string&quot; style=&quot;color: #98c379; line-height: 26px;&quot;&gt;&quot;&quot;&lt;/span&gt;,&amp;nbsp;&lt;span class=&quot;hljs-string&quot; style=&quot;color: #98c379; line-height: 26px;&quot;&gt;&quot;&#x5F69;&#x7968;|&#x529E;&#x8BC1;&quot;&lt;/span&gt;).Length&amp;nbsp;&amp;gt;&amp;nbsp;&lt;span class=&quot;hljs-number&quot; style=&quot;color: #d19a66; line-height: 26px;&quot;&gt;0&lt;/span&gt;)&amp;nbsp;&lt;span class=&quot;hljs-comment&quot; style=&quot;color: #5c6370; font-style: italic; line-height: 26px;&quot;&gt;//&amp;nbsp;&#x8FD9;&#x91CC;&#x5199;&#x6B7B;&#x4E86;&#xFF0C;&#x5E94;&#x8BE5;&#x4F7F;&#x7528;&#x654F;&#x611F;&#x8BCD;&#x5E93;&lt;/span&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;context.Result&amp;nbsp;=&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;new&lt;/span&gt;&amp;nbsp;BadRequestObjectResult(&lt;span class=&quot;hljs-string&quot; style=&quot;color: #98c379; line-height: 26px;&quot;&gt;&quot;&#x53C2;&#x6570;&#x4E0D;&#x5408;&#x6CD5;&#xFF01;&quot;&lt;/span&gt;);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;return&lt;/span&gt;;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-meta&quot; style=&quot;color: #61aeee; line-height: 26px;&quot;&gt;#&lt;span class=&quot;hljs-meta-keyword&quot; style=&quot;line-height: 26px;&quot;&gt;endregion&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-meta&quot; style=&quot;color: #61aeee; line-height: 26px;&quot;&gt;#&lt;span class=&quot;hljs-meta-keyword&quot; style=&quot;line-height: 26px;&quot;&gt;region&lt;/span&gt;&amp;nbsp;&#x62E6;&#x622A;&#x6389;&#x9ED1;&#x540D;&#x5355;&#x4E2D;&#x7684;IP&lt;/span&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;if&lt;/span&gt;&amp;nbsp;(&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;new&lt;/span&gt;[]&amp;nbsp;{&amp;nbsp;&lt;span class=&quot;hljs-string&quot; style=&quot;color: #98c379; line-height: 26px;&quot;&gt;&quot;1.2.3.4&quot;&lt;/span&gt;,&amp;nbsp;&lt;span class=&quot;hljs-string&quot; style=&quot;color: #98c379; line-height: 26px;&quot;&gt;&quot;5.6.7.8&quot;&lt;/span&gt;&amp;nbsp;}.Contains(ip))&amp;nbsp;&lt;span class=&quot;hljs-comment&quot; style=&quot;color: #5c6370; font-style: italic; line-height: 26px;&quot;&gt;//&amp;nbsp;&#x8FD9;&#x91CC;&#x4E5F;&#x5199;&#x6B7B;&#x4E86;&amp;nbsp;&#x5E94;&#x8BE5;&#x6709;&#x9ED1;&#x540D;&#x5355;&#x5E93;&lt;/span&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;context.Result&amp;nbsp;=&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;new&lt;/span&gt;&amp;nbsp;BadRequestObjectResult(&lt;span class=&quot;hljs-string&quot; style=&quot;color: #98c379; line-height: 26px;&quot;&gt;&quot;&#x60A8;&#x5F53;&#x524D;&#x6240;&#x5728;&#x7684;&#x7F51;&#x7EDC;&#x73AF;&#x5883;&#x4E0D;&#x652F;&#x6301;&#x8BBF;&#x95EE;&#x672C;&#x7AD9;&#xFF01;&quot;&lt;/span&gt;);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;return&lt;/span&gt;;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-meta&quot; style=&quot;color: #61aeee; line-height: 26px;&quot;&gt;#&lt;span class=&quot;hljs-meta-keyword&quot; style=&quot;line-height: 26px;&quot;&gt;endregion&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-meta&quot; style=&quot;color: #61aeee; line-height: 26px;&quot;&gt;#&lt;span class=&quot;hljs-meta-keyword&quot; style=&quot;line-height: 26px;&quot;&gt;region&lt;/span&gt;&amp;nbsp;&#x62E6;&#x622A;&#x7279;&#x5B9A;&#x7684;IP&#x5730;&#x5740;&#x6BB5;&lt;/span&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-comment&quot; style=&quot;color: #5c6370; font-style: italic; line-height: 26px;&quot;&gt;//&#x540C;&#x6837;&#x6709;&#x4E00;&#x4E2A;&#x4E13;&#x95E8;&#x5B58;&#x50A8;IP&#x5730;&#x5740;&#x6BB5;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x6BD4;&#x5982;&#x6211;&#x60F3;&#x62E6;&#x622A;36.149.0.0~36.149.15.255&#x8FD9;&#x4E2A;&#x5730;&#x5740;&#x6BB5;&#xFF0C;&#x90A3;&#x600E;&#x4E48;&#x5224;&#x65AD;&#x4E00;&#x4E2A;IP&#x662F;&#x5426;&#x5728;&#x8FD9;&#x4E2A;&#x5730;&#x5740;&#x6BB5;&#x5185;&#x5462;&#xFF1F;&#x5B66;&#x8FC7;&#x7F51;&#x7EDC;&#x7684;&#x540C;&#x5B66;&#x80AF;&#x5B9A;&#x77E5;&#x9053;&#xFF0C;IP&#x5730;&#x5740;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x4E00;&#x6BB5;32&#x4F4D;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x7F16;&#x7801;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5C06;IP&#x5730;&#x5740;&#x8F6C;&#x6362;&#x6210;&#x5341;&#x8FDB;&#x5236;&#x540E;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5224;&#x65AD;&#x662F;&#x5426;&#x5728;&#x5730;&#x5740;&#x6BB5;&#x5185;&#x4E86;&lt;/span&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;if&lt;/span&gt;&amp;nbsp;(ip.IpAddressInRange(&lt;span class=&quot;hljs-string&quot; style=&quot;color: #98c379; line-height: 26px;&quot;&gt;&quot;36.149.0.0&quot;&lt;/span&gt;,&amp;nbsp;&lt;span class=&quot;hljs-string&quot; style=&quot;color: #98c379; line-height: 26px;&quot;&gt;&quot;36.149.15.255&quot;&lt;/span&gt;))&amp;nbsp;&lt;span class=&quot;hljs-comment&quot; style=&quot;color: #5c6370; font-style: italic; line-height: 26px;&quot;&gt;//&amp;nbsp;&#x8FD9;&#x91CC;&#x4E5F;&#x5199;&#x6B7B;&#x4E86;&amp;nbsp;&#x5E94;&#x8BE5;&#x6709;&#x9ED1;&#x540D;&#x5355;&#x5E93;&lt;/span&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;context.Result&amp;nbsp;=&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;new&lt;/span&gt;&amp;nbsp;BadRequestObjectResult(&lt;span class=&quot;hljs-string&quot; style=&quot;color: #98c379; line-height: 26px;&quot;&gt;&quot;&#x60A8;&#x5F53;&#x524D;&#x6240;&#x5728;&#x7684;&#x7F51;&#x7EDC;&#x73AF;&#x5883;&#x4E0D;&#x652F;&#x6301;&#x8BBF;&#x95EE;&#x672C;&#x7AD9;&#xFF01;&quot;&lt;/span&gt;);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;return&lt;/span&gt;;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-meta&quot; style=&quot;color: #61aeee; line-height: 26px;&quot;&gt;#&lt;span class=&quot;hljs-meta-keyword&quot; style=&quot;line-height: 26px;&quot;&gt;endregion&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-meta&quot; style=&quot;color: #61aeee; line-height: 26px;&quot;&gt;#&lt;span class=&quot;hljs-meta-keyword&quot; style=&quot;line-height: 26px;&quot;&gt;region&lt;/span&gt;&amp;nbsp;&#x9650;&#x5236;&#x8BF7;&#x6C42;&#x9891;&#x6B21;&lt;/span&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-comment&quot; style=&quot;color: #5c6370; font-style: italic; line-height: 26px;&quot;&gt;//&#x6211;&#x4EEC;&#x9700;&#x8981;&#x8BB0;&#x5F55;&#x6BCF;&#x4E2A;IP&#x7684;&#x8BF7;&#x6C42;&#x6B21;&#x6570;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x9700;&#x8981;&#x7528;&#x5230;&#x7F13;&#x5B58;&#x7EC4;&#x4EF6;CacheManager&#xFF0C;&#x7528;CacheManager&#x7684;&#x597D;&#x5904;&#x5728;&#x4E8E;&#x53EF;&#x4EE5;&#x5E73;&#x6ED1;&#x7684;&#x5728;&#x5404;&#x79CD;&#x6301;&#x4E45;&#x5316;&#x5E93;&#x4E4B;&#x95F4;&#x5207;&#x6362;&lt;/span&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#x4E5F;&#x5C31;&#x662F;&#x53EF;&#x4EE5;&#x4E0D;&#x52A8;&#x4E3B;&#x8981;&#x4EE3;&#x7801;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x76F4;&#x63A5;&#x4ECE;&#x5185;&#x5B58;&#x7F13;&#x5B58;&#x5207;&#x6362;&#x5230;Redis&#x6216;MongoDB&#x4E4B;&#x7C7B;&#x7684;&#x8FD9;&#x79CD;&#x64CD;&#x4F5C;&#x3002;&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-comment&quot; style=&quot;color: #5c6370; font-style: italic; line-height: 26px;&quot;&gt;//&amp;nbsp;&#x9650;&#x6D41;&#x89C4;&#x5219;&#xFF1A;&#x540C;&#x4E00;IP&#x6BCF;&#x5206;&#x949F;&#x7684;&#x6700;&#x5927;&#x8BF7;&#x6C42;&#x6570;&#x4E3A;300&#x6B21;/&#x5206;&#x949F;&#xFF0C;&#x82E5;&#x4E00;&#x5206;&#x949F;&#x5185;&#x8BF7;&#x6C42;&#x6570;&#x8D85;&#x8FC7;300&#x5219;&#x8BA4;&#x4E3A;&#x662F;&#x6076;&#x610F;&#x8BF7;&#x6C42;&#xFF0C;&#x51BB;&#x7ED3;&#x8BE5;IP&amp;nbsp;1&#x5206;&#x949F;&#xFF0C;&#x5E76;&#x4E14;&#x662F;&#x6ED1;&#x52A8;&#x65F6;&#x95F4;&#x3002;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#x540C;&#x6837;&#x4E5F;&#x9700;&#x8981;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x81EA;&#x5B9A;&#x4E49;&#x5F02;&#x5E38;&#x4EE5;&#x65B9;&#x4FBF;&#x505A;&#x540C;&#x4E00;&#x62E6;&#x622A;&#x5904;&#x7406;&#xFF1A;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;var&lt;/span&gt;&amp;nbsp;times&amp;nbsp;=&amp;nbsp;_cacheManager.AddOrUpdate(&lt;span class=&quot;hljs-string&quot; style=&quot;color: #98c379; line-height: 26px;&quot;&gt;&quot;Frequency:&quot;&lt;/span&gt;&amp;nbsp;&#x2B;&amp;nbsp;ip,&amp;nbsp;&lt;span class=&quot;hljs-number&quot; style=&quot;color: #d19a66; line-height: 26px;&quot;&gt;1&lt;/span&gt;,&amp;nbsp;i&amp;nbsp;=&amp;gt;&amp;nbsp;i&amp;nbsp;&#x2B;&amp;nbsp;&lt;span class=&quot;hljs-number&quot; style=&quot;color: #d19a66; line-height: 26px;&quot;&gt;1&lt;/span&gt;,&amp;nbsp;&lt;span class=&quot;hljs-number&quot; style=&quot;color: #d19a66; line-height: 26px;&quot;&gt;5&lt;/span&gt;);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;_cacheManager.Expire(&lt;span class=&quot;hljs-string&quot; style=&quot;color: #98c379; line-height: 26px;&quot;&gt;&quot;Frequency:&quot;&lt;/span&gt;&amp;nbsp;&#x2B;&amp;nbsp;ip,&amp;nbsp;ExpirationMode.Sliding,&amp;nbsp;TimeSpan.FromSeconds(&lt;span class=&quot;hljs-number&quot; style=&quot;color: #d19a66; line-height: 26px;&quot;&gt;1&lt;/span&gt;));&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;var&lt;/span&gt;&amp;nbsp;limit&amp;nbsp;=&amp;nbsp;&lt;span class=&quot;hljs-number&quot; style=&quot;color: #d19a66; line-height: 26px;&quot;&gt;3&lt;/span&gt;;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;if&lt;/span&gt;&amp;nbsp;(times&amp;nbsp;&amp;lt;=&amp;nbsp;limit)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;return&lt;/span&gt;;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;if&lt;/span&gt;&amp;nbsp;(times&amp;nbsp;&amp;gt;&amp;nbsp;limit&amp;nbsp;*&amp;nbsp;&lt;span class=&quot;hljs-number&quot; style=&quot;color: #d19a66; line-height: 26px;&quot;&gt;1.2&lt;/span&gt;)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;_cacheManager.Expire(&lt;span class=&quot;hljs-string&quot; style=&quot;color: #98c379; line-height: 26px;&quot;&gt;&quot;Frequency:&quot;&lt;/span&gt;&amp;nbsp;&#x2B;&amp;nbsp;ip,&amp;nbsp;ExpirationMode.Sliding,&amp;nbsp;TimeSpan.FromMinutes(&lt;span class=&quot;hljs-number&quot; style=&quot;color: #d19a66; line-height: 26px;&quot;&gt;1&lt;/span&gt;));&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;context.Result&amp;nbsp;=&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;new&lt;/span&gt;&amp;nbsp;BadRequestObjectResult(&lt;span class=&quot;hljs-string&quot; style=&quot;color: #98c379; line-height: 26px;&quot;&gt;&quot;&#x8BF7;&#x6C42;&#x9891;&#x7E41;&#xFF0C;&#x7A0D;&#x540E;&#x518D;&#x8BD5;&#x8BD5;&#xFF01;&quot;&lt;/span&gt;);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;return&lt;/span&gt;;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-meta&quot; style=&quot;color: #61aeee; line-height: 26px;&quot;&gt;#&lt;span class=&quot;hljs-meta-keyword&quot; style=&quot;line-height: 26px;&quot;&gt;endregion&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br&gt;&lt;br&gt;&amp;nbsp;&amp;nbsp;}&lt;br&gt;}&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h2 data-tool=&quot;mdnice&#x7F16;&#x8F91;&#x5668;&quot; style=&quot;margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px;&quot;&gt;&lt;span class=&quot;prefix&quot; style=&quot;display: none;&quot;&gt;&lt;/span&gt;&lt;span class=&quot;content&quot;&gt;IP&#x6BB5;&#x5224;&#x65AD;&lt;/span&gt;&lt;span class=&quot;suffix&quot;&gt;&lt;/span&gt;&lt;/h2&gt;&#xA;&lt;p data-tool=&quot;mdnice&#x7F16;&#x8F91;&#x5668;&quot; style=&quot;font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;&quot;&gt;IPv4&#x5730;&#x5740;&#x662F;&#x7531;4&#x6BB5;0-255&#x7684;&#x6570;&#x5B57;&#x7EC4;&#x6210;&#x7684;&#xFF0C;&#x5F62;&#x5982;&#xFF1A;a.b.c.d(0&#x2264;a,b,c,d&#x2264;255)&#xFF0C;IPv4&#x4E5F;&#x53EB;32&#x4F4D;&#x5730;&#x5740;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x662F;32&#x4F4D;&#x5462;&#xFF0C;&#x6211;&#x4EEC;&#x628A;&#x6BCF;&#x4E00;&#x6BB5;&#x8F6C;&#x6362;&#x6210;&#x4E8C;&#x8FDB;&#x5236;&#x4E4B;&#x540E;&#xFF0C;&#x5B83;&#x7684;&#x53D6;&#x503C;&#x8303;&#x56F4;&#x5C31;&#x662F;00000000-11111111&#xFF0C;&#x6240;&#x4EE5;&#x52A0;&#x8D77;&#x6765;&#x5C31;&#x662F;32&#x4F4D;&#x3002;&#x90A3;IP&#x5730;&#x5740;&#x7684;&#x672C;&#x8D28;&#x662F;&#x4E00;&#x4E2A;32&#x4F4D;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x6570;&#xFF0C;&#x6211;&#x4EEC;&#x4FBF;&#x53EF;&#x4EE5;&#x5C06;&#x8FD9;&#x4E2A;32&#x4F4D;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x518D;&#x8F6C;&#x6362;&#x6210;&#x5341;&#x8FDB;&#x5236;&#xFF0C;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&lt;/p&gt;&#xA;&lt;p data-tool=&quot;mdnice&#x7F16;&#x8F91;&#x5668;&quot; style=&quot;font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black;&quot;&gt;&#x4F8B;&#x5982;&#xFF1A;&lt;/p&gt;&#xA;&lt;blockquote class=&quot;multiquote-1&quot; data-tool=&quot;mdnice&#x7F16;&#x8F91;&#x5668;&quot; style=&quot;border: none; display: block; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; border-left: 3px solid rgba(0, 0, 0, 0.4); background: rgba(0, 0, 0, 0.05); color: #6a737d; padding-top: 10px; padding-bottom: 10px; padding-left: 20px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px;&quot;&gt;&#xA;&lt;p style=&quot;font-size: 16px; padding-top: 8px; padding-bottom: 8px; margin: 0px; color: black; line-height: 26px;&quot;&gt;&#x4EE5;4.3.2.1&#x4E3A;&#x4F8B;&#xFF0C;&#x5BF9;&#x5E94;&#x7684;&#x5341;&#x8FDB;&#x5236;&#x662F;&#x591A;&#x5C11;&#x5462;&#xFF1F;&lt;br&gt;&#xA;&#x7B2C;&#x4E00;&#x6B65;&#xFF0C;&#x8F6C;&#x6362;&#x6210;&#x4E8C;&#x8FDB;&#x5236;&#xFF0C;&#x5373;00000100.00000011.00000010.00000001&#xFF1B;&lt;br&gt;&#xA;&#x7B2C;&#x4E8C;&#x6B65;&#xFF0C;&#x53BB;&#x6389;&#x201C;.&#x201D;&#xFF0C;&#x5F97;&#x5230;&#x5B8C;&#x6574;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x6570;&#xFF1A;00000100000000110000001000000001&#xFF1B;&lt;br&gt;&#xA;&#x7B2C;&#x4E09;&#x6B65;&#xFF0C;&#x518D;&#x8F6C;&#x56DE;&#x5341;&#x8FDB;&#x5236;&#xFF1A;00000100000000110000001000000001(2)=67305985(10)&#xFF1B;&lt;br&gt;&#xA;&#x6240;&#x4EE5;4.3.2.1&#x5BF9;&#x5E94;&#x7684;&#x5341;&#x8FDB;&#x5236;&#x6570;&#x662F;67305985&#x3002;&lt;br&gt;&#xA;&#x90A3;&#x6709;&#x6CA1;&#x6709;&#x4EC0;&#x4E48;&#x66F4;&#x5FEB;&#x7684;&#x529E;&#x6CD5;&#x6765;&#x8BA1;&#x7B97;&#x8FD9;&#x4E2A;&#x5341;&#x8FDB;&#x5236;&#x6570;&#x5462;&#xFF1F;&#x80AF;&#x5B9A;&#x662F;&#x6709;&#x7684;&#xFF0C;&#x5C31;&#x662F;&#x79FB;&#x4F4D;&#x64CD;&#x4F5C;&#xFF0C;67305985=4&amp;lt;&amp;lt;24&#x2B;3&amp;lt;&amp;lt;16&#x2B;2&amp;lt;&amp;lt;8&#x2B;1&#x3002;&#x8FD9;&#x6837;&#x5C31;&#x5B9E;&#x73B0;&#x4E86;IP&#x5730;&#x5740;&#x8F6C;&#x5341;&#x8FDB;&#x5236;&#x6570;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x5373;&#x4F7F;&#x662F;128&#x4F4D;&#x7684;IPv6&#xFF0C;&#x4E5F;&#x662F;&#x5982;&#x6CD5;&#x70AE;&#x5236;&#xFF01;&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;pre class=&quot;custom&quot; data-tool=&quot;mdnice&#x7F16;&#x8F91;&#x5668;&quot; style=&quot;margin-top: 10px; margin-bottom: 10px;&quot;&gt;&lt;code class=&quot;hljs&quot; style=&quot;overflow-x: auto; padding: 16px; color: #abb2bf; background: #282c34; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;&quot;&gt;&lt;span class=&quot;hljs-comment&quot; style=&quot;color: #5c6370; font-style: italic; line-height: 26px;&quot;&gt;&lt;span class=&quot;hljs-doctag&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;///&lt;/span&gt;&amp;nbsp;&lt;span class=&quot;hljs-doctag&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;&amp;lt;summary&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;hljs-comment&quot; style=&quot;color: #5c6370; font-style: italic; line-height: 26px;&quot;&gt;&lt;span class=&quot;hljs-doctag&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;///&lt;/span&gt;&amp;nbsp;IP&#x5730;&#x5740;&#x8F6C;&#x6362;&#x6210;&#x6570;&#x5B57;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;hljs-comment&quot; style=&quot;color: #5c6370; font-style: italic; line-height: 26px;&quot;&gt;&lt;span class=&quot;hljs-doctag&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;///&lt;/span&gt;&amp;nbsp;&lt;span class=&quot;hljs-doctag&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;&amp;lt;/summary&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;hljs-comment&quot; style=&quot;color: #5c6370; font-style: italic; line-height: 26px;&quot;&gt;&lt;span class=&quot;hljs-doctag&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;///&lt;/span&gt;&amp;nbsp;&lt;span class=&quot;hljs-doctag&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;&amp;lt;param&amp;nbsp;name=&quot;addr&quot;&amp;gt;&lt;/span&gt;IP&#x5730;&#x5740;&lt;span class=&quot;hljs-doctag&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;&amp;lt;/param&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;hljs-comment&quot; style=&quot;color: #5c6370; font-style: italic; line-height: 26px;&quot;&gt;&lt;span class=&quot;hljs-doctag&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;///&lt;/span&gt;&amp;nbsp;&lt;span class=&quot;hljs-doctag&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;&amp;lt;returns&amp;gt;&lt;/span&gt;&#x6570;&#x5B57;,&#x8F93;&#x5165;&#x65E0;&#x6548;IP&#x5730;&#x5740;&#x8FD4;&#x56DE;0&lt;span class=&quot;hljs-doctag&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;&amp;lt;/returns&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;hljs-function&quot; style=&quot;line-height: 26px;&quot;&gt;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;private&lt;/span&gt;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;static&lt;/span&gt;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;uint&lt;/span&gt;&amp;nbsp;&lt;span class=&quot;hljs-title&quot; style=&quot;color: #61aeee; line-height: 26px;&quot;&gt;IPToID&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot; style=&quot;line-height: 26px;&quot;&gt;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;this&lt;/span&gt;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;string&lt;/span&gt;&amp;nbsp;addr&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;if&lt;/span&gt;&amp;nbsp;(!IPAddress.TryParse(addr,&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;out&lt;/span&gt;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;var&lt;/span&gt;&amp;nbsp;ip))&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;return&lt;/span&gt;&amp;nbsp;&lt;span class=&quot;hljs-number&quot; style=&quot;color: #d19a66; line-height: 26px;&quot;&gt;0&lt;/span&gt;;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;byte&lt;/span&gt;[]&amp;nbsp;bInt&amp;nbsp;=&amp;nbsp;ip.GetAddressBytes();&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;if&lt;/span&gt;&amp;nbsp;(BitConverter.IsLittleEndian)&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Array.Reverse(bInt);&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;return&lt;/span&gt;&amp;nbsp;BitConverter.ToUInt32(bInt,&amp;nbsp;&lt;span class=&quot;hljs-number&quot; style=&quot;color: #d19a66; line-height: 26px;&quot;&gt;0&lt;/span&gt;);&lt;br&gt;}&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;span class=&quot;hljs-comment&quot; style=&quot;color: #5c6370; font-style: italic; line-height: 26px;&quot;&gt;&lt;span class=&quot;hljs-doctag&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;///&lt;/span&gt;&amp;nbsp;&lt;span class=&quot;hljs-doctag&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;&amp;lt;summary&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;hljs-comment&quot; style=&quot;color: #5c6370; font-style: italic; line-height: 26px;&quot;&gt;&lt;span class=&quot;hljs-doctag&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;///&lt;/span&gt;&amp;nbsp;&#x5224;&#x65AD;IP&#x5730;&#x5740;&#x5728;&#x4E0D;&#x5728;&#x67D0;&#x4E2A;IP&#x5730;&#x5740;&#x6BB5;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;hljs-comment&quot; style=&quot;color: #5c6370; font-style: italic; line-height: 26px;&quot;&gt;&lt;span class=&quot;hljs-doctag&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;///&lt;/span&gt;&amp;nbsp;&lt;span class=&quot;hljs-doctag&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;&amp;lt;/summary&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;hljs-comment&quot; style=&quot;color: #5c6370; font-style: italic; line-height: 26px;&quot;&gt;&lt;span class=&quot;hljs-doctag&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;///&lt;/span&gt;&amp;nbsp;&lt;span class=&quot;hljs-doctag&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;&amp;lt;param&amp;nbsp;name=&quot;input&quot;&amp;gt;&lt;/span&gt;&#x9700;&#x8981;&#x5224;&#x65AD;&#x7684;IP&#x5730;&#x5740;&lt;span class=&quot;hljs-doctag&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;&amp;lt;/param&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;hljs-comment&quot; style=&quot;color: #5c6370; font-style: italic; line-height: 26px;&quot;&gt;&lt;span class=&quot;hljs-doctag&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;///&lt;/span&gt;&amp;nbsp;&lt;span class=&quot;hljs-doctag&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;&amp;lt;param&amp;nbsp;name=&quot;begin&quot;&amp;gt;&lt;/span&gt;&#x8D77;&#x59CB;&#x5730;&#x5740;&lt;span class=&quot;hljs-doctag&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;&amp;lt;/param&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;hljs-comment&quot; style=&quot;color: #5c6370; font-style: italic; line-height: 26px;&quot;&gt;&lt;span class=&quot;hljs-doctag&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;///&lt;/span&gt;&amp;nbsp;&lt;span class=&quot;hljs-doctag&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;&amp;lt;param&amp;nbsp;name=&quot;ends&quot;&amp;gt;&lt;/span&gt;&#x7ED3;&#x675F;&#x5730;&#x5740;&lt;span class=&quot;hljs-doctag&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;&amp;lt;/param&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;hljs-comment&quot; style=&quot;color: #5c6370; font-style: italic; line-height: 26px;&quot;&gt;&lt;span class=&quot;hljs-doctag&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;///&lt;/span&gt;&amp;nbsp;&lt;span class=&quot;hljs-doctag&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;&amp;lt;returns&amp;gt;&lt;/span&gt;&lt;span class=&quot;hljs-doctag&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;&amp;lt;/returns&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;hljs-function&quot; style=&quot;line-height: 26px;&quot;&gt;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;public&lt;/span&gt;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;static&lt;/span&gt;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;bool&lt;/span&gt;&amp;nbsp;&lt;span class=&quot;hljs-title&quot; style=&quot;color: #61aeee; line-height: 26px;&quot;&gt;IpAddressInRange&lt;/span&gt;(&lt;span class=&quot;hljs-params&quot; style=&quot;line-height: 26px;&quot;&gt;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;this&lt;/span&gt;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;string&lt;/span&gt;&amp;nbsp;input,&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;string&lt;/span&gt;&amp;nbsp;begin,&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;string&lt;/span&gt;&amp;nbsp;ends&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;{&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;uint&lt;/span&gt;&amp;nbsp;current&amp;nbsp;=&amp;nbsp;input.IPToID();&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;hljs-keyword&quot; style=&quot;color: #c678dd; line-height: 26px;&quot;&gt;return&lt;/span&gt;&amp;nbsp;current&amp;nbsp;&amp;gt;=&amp;nbsp;begin.IPToID()&amp;nbsp;&amp;amp;&amp;amp;&amp;nbsp;current&amp;nbsp;&amp;lt;=&amp;nbsp;ends.IPToID();&lt;br&gt;}&lt;br&gt;&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;/section&gt;